# frozen_string_literal: true

date = Date.parse('2017-01-04')
ids = Payment.where(due_date: date).select(:id).map(&:id).sort
# [53564, 55760, 56053, 56724, 56952, 57068, 57198, 57271, 57835, 58416, 59168, 59999, 60508, 60518, 60594, 60622, 60887, 61022, 61105, 61239, 61324, 61363, 61397, 61406, 61637, 61710, 61749, 61786, 62282, 62446, 62600, 62741, 62937, 64077, 64496, 64749, 64786, 65009, 65021, 65141, 65150, 65253, 65291, 65329, 65407, 65500, 65619, 65658, 66154, 66183, 66243, 66257, 66288, 66306, 66449, 66469, 66484, 66494, 66540, 66581, 66617, 66787, 66795, 66801, 66825, 66834, 67157, 67178, 67209, 67254, 67274, 67286, 67291, 67320, 67454, 67466, 67494, 67549, 67577, 67583, 67594, 67609, 67645]

# Payment.where(id: ids).count

ids.each do |id|
  puts id
  ActiveRecord::Base.connection.execute("update payments set due_date = '2017-04-01' where id = #{id}")
end
